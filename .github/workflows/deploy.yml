name: üöÄ Trigger cPanel Deploy
on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Update and Deploy
        run: |
          # 1. Pull with the CLEAN path
          echo "üì• PULLING LATEST CODE..."
          curl -L -u "acpp2118:${{ secrets.CPANEL_PASSWORD }}" \
          "https://dondang.iixcp.rumahweb.net:2083/execute/VersionControl/update?repository_root=%2fhome%2facpp2118%2fpublic_html%2frev.acpedia.id"
          
          echo "‚è≥ Waiting for sync..."
          sleep 5
          
          # 2. Deploy with the CLEAN path
          echo "üöÄ DEPLOYING TO LIVE SITE..."
          curl -L -u "acpp2118:${{ secrets.CPANEL_PASSWORD }}" \
          "https://dondang.iixcp.rumahweb.net:2083/execute/VersionControl/deploy?repository_root=%2fhome%2facpp2118%2fpublic_html%2frev.acpedia.id"