name: üöÄ Trigger cPanel Deploy
on:
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Update and Deploy
        run: |
          # 1. Pull the latest code from GitHub to the cPanel repo folder
          echo "üì• PULLING LATEST CODE..."
          curl -L -u "acpp2118:${{ secrets.CPANEL_PASSWORD }}" \
          "https://dondang.iixcp.rumahweb.net:2083/execute/VersionControl/update?name=acpedia"
          
          # Give cPanel a few seconds to process the file download
          echo "‚è≥ Waiting for sync..."
          sleep 2
          
          # 2. Deploy (Move) the files to the public_html folder
          echo "üöÄ DEPLOYING TO LIVE SITE..."
          curl -L -u "acpp2118:${{ secrets.CPANEL_PASSWORD }}" \
          "https://dondang.iixcp.rumahweb.net:2083/execute/VersionControl/deploy?name=acpedia"